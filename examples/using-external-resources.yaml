# An example deploying a Docker swarm to use a pre-existing disovery mechanism
# (an Etcd cluster), and providing externally configured details for the TLS endpoints.
# These take the form of URLs from which to download the CA certificate, and a certificate
# and private key for each Swarm node.  Note the same URL will be used for each Swarm node
# so the certificate will have to be suitable for use on all of them, therefore will
# typically be a wildcard certifiate.
# TODO this needs to be reviewed, it hasn't been tested yet.
# Deploys on Centos nodes.


name: external-resource-urls
location: bluebox-sjc
services:

- type: docker-swarm-cluster
  name: swarm

  brooklyn.config:
    swarm.initial.size: 1
    discovery.url: etcd://10.10.10.123:8080/
    ca.cert.url: http://10.10.10.101:8080/default/ca.pem
    node.cert.url: http://10.10.10.101:8080/default/cert.pem
    private.key.url: http://10.10.10.101:8080/default/key.pem
